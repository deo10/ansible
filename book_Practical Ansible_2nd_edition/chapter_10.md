# page 290-304
# Configuring play execution via strategies

debugger: on_failed - Helps to find an issue when you develop the code

---
- name: Play to demonstrate the debug strategy
  hosts: web01.example.org
  strategy: debug
  debugger: on_failed
  gather_facts: no
  vars:
    name: james
  tasks:
    - name: Generate an error by referencing an undefined variable
      ansible.builtin.ping: data={{ mobile }}

# Using ansible-pull

$ ansible-pull -d /tmp/ansible-set-motd -i localhost, -U https://github.com/your-repo/your-playbook-repo.git

This command breaks down as follows:
-d /tmp/ansible-set-motd: This sets the working directory that
will contain the checkout of the code from GitHub. Ensure this is
writeable by the user account running the ansible-pull command.
-i ${HOSTNAME},: This runs only on the current host, specified by its
hostname from the appropriate shell variable.
-U https://github.com/jamesfreeman959/ansible-set-motd.git: We use this
URL to obtain the playbooks.
site.yml: This is the name of the playbook to run from the Git
repository specified earlier.
-e "ag_motd_content='MOTD generated by ansiblepull'":
This sets the appropriate Ansible variable to generate the MOTD content.



Questions
1. How do you restart the Apache web server in the frontends host group
via an ad hoc command?
   1. ansible frontends -i hosts -a "name=httpd
   state=restarted"
   2. ansible frontends -i hosts -b
   ansible.builtin.service -a "name=httpd
   state=restarted"
   -> 3. ansible frontends -i hosts -b -m
   ansible.builtin.service -a "name=httpd
   state=restarted"
   4. ansible frontends -i hosts -b -m
   ansible.builtin.server -a "name=httpd
   state=restarted"
   5. ansible frontends -i hosts -m restart -a
   "name=httpd"
1. Blocks allow you to logically make a group of tasks or perform error
handling:
   1. True (Correct)
   2. False

- name: Example of using blocks
  hosts: all
  tasks:
    - block:
        - name: Task that might fail
          command: /bin/false
      rescue:
        - name: Task to run if the previous task fails
          debug:
            msg: "The task failed"
      always:
        - name: Task to always run
          debug:
            msg: "This task always runs"

1. Default strategies are implemented via the relevant modules in the
playbook:
   1. True
   2. False (correct)
   
   - name: Example playbook with a strategy
  hosts: all
  strategy: free
  tasks:
    - name: Task 1
      command: /bin/true
    - name: Task 2
      command: /bin/true
